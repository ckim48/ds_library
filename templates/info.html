{% extends "layout.html" %}

{% block link %}
<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
{% endblock %}

{% block title %}
    Info
{% endblock %}

{% block main %}
    <div class="container-fluid center">
        <h2>{{ title }}</h2>
        <h4><em>by</em></h4>
        {% for author in authors %}
            <h4>{{ author }}</h4>
        {% endfor %}
        <img class="para-spacing border img-fluid" alt="Book cover of {{ title }}" src="{{ cover }}">

        <h5>About <em>{{ title }}</em></h5>
        <hr>
        <p>{{ description }}</p>
        <p>ISBN: {{ isbn }}</p>

        <!-- Adds Book to a specific shelf -->
        <div class="btn-group dropdown">
            <form action="/info" method="get">
                <div class="btn-group dropdown">
                    <button type="submit" id="add" name="add" value="{{ isbn }}" class="btn btn-primary">Add to My Books</button>
                    <button type="button" class="btn btn-primary dropdown-toggle"data-bs-toggle="dropdown">
                        <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li class="dropdown-header">Shelves</li>
                        <li><button type="submit" class="dropdown-item" id="add" name="currRead" value="{{ isbn }}" href="/currentlyreading">Currently Reading</button></li>
                        <li><button type="submit" class="dropdown-item" id="add" name="wantToRead" value="{{ isbn }}" href="/wanttoread">Want to Read</button></li>
                        <li><button type="submit" class="dropdown-item" id="add" name="alrRead" value="{{ isbn }}" href="/read">Read</button></li>
                    </ul>
                </div>
                <!-- Removes Book from My Books-->
                <button type="submit" class="btn btn-primary" name="remove" id="remove" value="{{ isbn }}">Remove from My Books</button>
            </form>
        </div>
        <div class="container">
            <h2 class="review-title mt-4">Book Review</h2>
                        <!-- Display existing comments -->
            <div id="comments">
                <h4 class="review-title mt-4">User Comments:</h4>
                <ul id="comment-list">
                    {% for comment in comments %}
                        <li>{{ comment }}</li>
                    {% endfor %}
                </ul>
            </div>

            <!-- Form to add a new comment -->
            <form id="comment-form">
                <h4 class="review-title mt-4 mb-4">Add a Comment:</h4>
                <textarea id="new-comment" class="form-control" rows="4" placeholder="Write your comment here"></textarea>
                <button type="submit" class="btn btn-primary mt-4">Submit Comment</button>
            </form>
        </div>
        <script>
            document.querySelector('#add').onclick = function() {
                alert("Added to My Books")
            }
        </script>

            <script>
        document.querySelector('#add').onclick = function() {
            alert("Added to My Books")
        }

        // Handle comment submission
        document.getElementById('comment-form').addEventListener('submit', function(event) {
            event.preventDefault(); // Prevent the form from submitting normally

            // Get the new comment from the textarea
            const newComment = document.getElementById('new-comment').value;

            // Append the new comment to the comment list
            const commentList = document.getElementById('comment-list');
            const commentItem = document.createElement('li');
            commentItem.textContent = newComment;
            commentList.appendChild(commentItem);

            // Clear the textarea after submission
            document.getElementById('new-comment').value = '';
        });
    </script>
{% endblock %}
